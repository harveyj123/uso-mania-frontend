/*!
 * @pixi/canvas-graphics - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/canvas-graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
this.PIXI=this.PIXI||{};var _pixi_canvas_graphics=function(e,t,i,a,r){"use strict";var n,l=function(){function e(){}return e.offsetPolygon=function(t,i){var a=[],r=t.length;i=e.isPolygonClockwise(t)?i:-1*i;for(var n=0;n<r;n+=2){var l=n-2;l<0&&(l+=r);var o=(n+2)%r,s=t[n]-t[l],h=t[n+1]-t[l+1],v=Math.sqrt(s*s+h*h);s/=v,h/=v;var g=-(h*=i),c=s*=i,p=[t[l]+g,t[l+1]+c],f=[t[n]+g,t[n+1]+c],u=t[o]-t[n],d=t[o+1]-t[n+1];u/=v=Math.sqrt(u*u+d*d),d/=v;var T=-(d*=i),m=u*=i,y=[t[n]+T,t[n+1]+m],x=[t[o]+T,t[o+1]+m],b=e.findIntersection(p[0],p[1],f[0],f[1],y[0],y[1],x[0],x[1]);b&&a.push.apply(a,b)}return a},e.findIntersection=function(e,t,i,a,r,n,l,o){var s=(o-n)*(i-e)-(l-r)*(a-t),h=(l-r)*(t-n)-(o-n)*(e-r);if(0===s)return 0===h&&0===(i-e)*(t-n)-(a-t)*(e-r)?[(e+i)/2,(t+a)/2]:null;var v=h/s;return[e+v*(i-e),t+v*(a-t)]},e.isPolygonClockwise=function(e){for(var t=0,i=0,a=e.length-2;i<e.length;a=i,i+=2)t+=(e[i]-e[a])*(e[i+1]+e[a+1]);return t>0},e}(),o=function(){function e(e){this._svgMatrix=null,this._tempMatrix=new i.Matrix,this.renderer=e}return e.prototype._calcCanvasStyle=function(e,r){var n;return e.texture&&e.texture.baseTexture!==t.Texture.WHITE.baseTexture?e.texture.valid?(n=a.canvasUtils.getTintedPattern(e.texture,r),this.setPatternTransform(n,e.matrix||i.Matrix.IDENTITY)):n="#808080":n="#"+("00000"+(0|r).toString(16)).slice(-6),n},e.prototype.render=function(e){var t=this.renderer,a=t.context,r=e.worldAlpha,n=e.transform.worldTransform;t.setContextTransform(n),t.setBlendMode(e.blendMode);for(var l,o,s=e.geometry.graphicsData,h=(e.tint>>16&255)/255,v=(e.tint>>8&255)/255,g=(255&e.tint)/255,c=0;c<s.length;c++){var p=s[c],f=p.shape,u=p.fillStyle,d=p.lineStyle,T=0|p.fillStyle.color,m=0|p.lineStyle.color;if(p.matrix&&t.setContextTransform(n.copyTo(this._tempMatrix).append(p.matrix)),u.visible){var y=((T>>16&255)/255*h*255<<16)+((T>>8&255)/255*v*255<<8)+(255&T)/255*g*255;l=this._calcCanvasStyle(u,y)}if(d.visible){var x=((m>>16&255)/255*h*255<<16)+((m>>8&255)/255*v*255<<8)+(255&m)/255*g*255;o=this._calcCanvasStyle(d,x)}if(a.lineWidth=d.width,a.lineCap=d.cap,a.lineJoin=d.join,a.miterLimit=d.miterLimit,p.type===i.SHAPES.POLY){a.beginPath();var b=(R=f).points,P=p.holes,S=void 0,M=void 0,C=void 0,_=void 0,w=void 0;a.moveTo(b[0],b[1]);for(var I=2;I<b.length;I+=2)a.lineTo(b[I],b[I+1]);if(R.closeStroke&&a.closePath(),P.length>0){w=[],S=0,C=b[0],_=b[1];for(I=2;I+2<b.length;I+=2)S+=(b[I]-C)*(b[I+3]-_)-(b[I+2]-C)*(b[I+1]-_);for(var k=0;k<P.length;k++)if(b=P[k].shape.points){M=0,C=b[0],_=b[1];for(I=2;I+2<b.length;I+=2)M+=(b[I]-C)*(b[I+3]-_)-(b[I+2]-C)*(b[I+1]-_);if(M*S<0){a.moveTo(b[0],b[1]);for(I=2;I<b.length;I+=2)a.lineTo(b[I],b[I+1])}else{a.moveTo(b[b.length-2],b[b.length-1]);for(I=b.length-4;I>=0;I-=2)a.lineTo(b[I],b[I+1])}P[k].shape.closeStroke&&a.closePath(),w[k]=M*S<0}}u.visible&&(a.globalAlpha=u.alpha*r,a.fillStyle=l,a.fill()),d.visible&&this.paintPolygonStroke(R,d,o,P,w,r,a)}else if(p.type===i.SHAPES.RECT){var R=f;if(u.visible&&(a.globalAlpha=u.alpha*r,a.fillStyle=l,a.fillRect(R.x,R.y,R.width,R.height)),d.visible){var A=d.width*(.5-(1-d.alignment)),E=R.width+2*A,q=R.height+2*A;a.globalAlpha=d.alpha*r,a.strokeStyle=o,a.strokeRect(R.x-A,R.y-A,E,q)}}else if(p.type===i.SHAPES.CIRC){R=f;if(a.beginPath(),a.arc(R.x,R.y,R.radius,0,2*Math.PI),a.closePath(),u.visible&&(a.globalAlpha=u.alpha*r,a.fillStyle=l,a.fill()),d.visible){if(.5!==d.alignment){A=d.width*(.5-(1-d.alignment));a.beginPath(),a.arc(R.x,R.y,R.radius+A,0,2*Math.PI),a.closePath()}a.globalAlpha=d.alpha*r,a.strokeStyle=o,a.stroke()}}else if(p.type===i.SHAPES.ELIP){R=f;if((W=1===d.alignment)||this.paintEllipse(R,u,d,l,r,a),d.visible){if(.5!==d.alignment){var z=.5522848,G=(A=d.width*(.5-(1-d.alignment)),2*(R.width+A)),X=2*(R.height+A),H=R.x-G/2,L=R.y-X/2,j=G/2*z,D=X/2*z,O=H+G,B=L+X,N=H+G/2,V=L+X/2;a.beginPath(),a.moveTo(H,V),a.bezierCurveTo(H,V-D,N-j,L,N,L),a.bezierCurveTo(N+j,L,O,V-D,O,V),a.bezierCurveTo(O,V+D,N+j,B,N,B),a.bezierCurveTo(N-j,B,H,V+D,H,V),a.closePath()}a.globalAlpha=d.alpha*r,a.strokeStyle=o,a.stroke()}W&&this.paintEllipse(R,u,d,l,r,a)}else if(p.type===i.SHAPES.RREC){var W;R=f;if((W=1===d.alignment)||this.paintRoundedRectangle(R,u,d,l,r,a),d.visible){if(.5!==d.alignment){E=R.width,q=R.height,A=d.width*(.5-(1-d.alignment));var Y=R.x-A,J=R.y-A,U=R.width+2*A,F=R.height+2*A,K=A*(d.alignment>=1?Math.min(U/E,F/q):Math.min(E/U,q/F)),Q=R.radius+K,Z=Math.min(U,F)/2;Q=Q>Z?Z:Q,a.beginPath(),a.moveTo(Y,J+Q),a.lineTo(Y,J+F-Q),a.quadraticCurveTo(Y,J+F,Y+Q,J+F),a.lineTo(Y+U-Q,J+F),a.quadraticCurveTo(Y+U,J+F,Y+U,J+F-Q),a.lineTo(Y+U,J+Q),a.quadraticCurveTo(Y+U,J,Y+U-Q,J),a.lineTo(Y+Q,J),a.quadraticCurveTo(Y,J,Y,J+Q),a.closePath()}a.globalAlpha=d.alpha*r,a.strokeStyle=o,a.stroke()}W&&this.paintRoundedRectangle(R,u,d,l,r,a)}}},e.prototype.paintPolygonStroke=function(e,t,i,a,r,n,o){if(.5!==t.alignment){var s=t.width*(.5-(1-t.alignment)),h=l.offsetPolygon(e.points,s),v=void 0;o.beginPath(),o.moveTo(h[0],h[1]);for(var g=2;g<h.length;g+=2)o.lineTo(h[g],h[g+1]);e.closeStroke&&o.closePath();for(var c=0;c<a.length;c++){if(v=a[c].shape.points,h=l.offsetPolygon(v,s),r[c]){o.moveTo(h[0],h[1]);for(g=2;g<h.length;g+=2)o.lineTo(h[g],h[g+1])}else{o.moveTo(h[h.length-2],h[h.length-1]);for(g=h.length-4;g>=0;g-=2)o.lineTo(h[g],h[g+1])}a[c].shape.closeStroke&&o.closePath()}}o.globalAlpha=t.alpha*n,o.strokeStyle=i,o.stroke()},e.prototype.paintEllipse=function(e,t,i,a,r,n){var l=2*e.width,o=2*e.height,s=e.x-l/2,h=e.y-o/2,v=.5522848,g=l/2*v,c=o/2*v,p=s+l,f=h+o,u=s+l/2,d=h+o/2;0===i.alignment&&n.save(),n.beginPath(),n.moveTo(s,d),n.bezierCurveTo(s,d-c,u-g,h,u,h),n.bezierCurveTo(u+g,h,p,d-c,p,d),n.bezierCurveTo(p,d+c,u+g,f,u,f),n.bezierCurveTo(u-g,f,s,d+c,s,d),n.closePath(),0===i.alignment&&n.clip(),t.visible&&(n.globalAlpha=t.alpha*r,n.fillStyle=a,n.fill()),0===i.alignment&&n.restore()},e.prototype.paintRoundedRectangle=function(e,t,i,a,r,n){var l=e.x,o=e.y,s=e.width,h=e.height,v=e.radius,g=Math.min(s,h)/2;v=v>g?g:v,0===i.alignment&&n.save(),n.beginPath(),n.moveTo(l,o+v),n.lineTo(l,o+h-v),n.quadraticCurveTo(l,o+h,l+v,o+h),n.lineTo(l+s-v,o+h),n.quadraticCurveTo(l+s,o+h,l+s,o+h-v),n.lineTo(l+s,o+v),n.quadraticCurveTo(l+s,o,l+s-v,o),n.lineTo(l+v,o),n.quadraticCurveTo(l,o,l,o+v),n.closePath(),0===i.alignment&&n.clip(),t.visible&&(n.globalAlpha=t.alpha*r,n.fillStyle=a,n.fill()),0===i.alignment&&n.restore()},e.prototype.setPatternTransform=function(e,t){if(!1!==this._svgMatrix){if(!this._svgMatrix){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i&&i.createSVGMatrix&&(this._svgMatrix=i.createSVGMatrix()),!this._svgMatrix||!e.setTransform)return void(this._svgMatrix=!1)}this._svgMatrix.a=t.a,this._svgMatrix.b=t.b,this._svgMatrix.c=t.c,this._svgMatrix.d=t.d,this._svgMatrix.e=t.tx,this._svgMatrix.f=t.ty,e.setTransform(this._svgMatrix.inverse())}},e.prototype.destroy=function(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null},e}(),s=new i.Matrix;return r.Graphics.prototype.generateCanvasTexture=function(e,i){void 0===i&&(i=1);var r=this.getLocalBounds(),l=t.RenderTexture.create({width:r.width,height:r.height,scaleMode:e,resolution:i});n||(n=new a.CanvasRenderer),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(s),s.invert(),s.tx-=r.x,s.ty-=r.y,n.render(this,{renderTexture:l,clear:!0,transform:s});var o=t.Texture.from(l.baseTexture._canvasRenderTarget.canvas,{scaleMode:e});return o.baseTexture.setResolution(i),o},r.Graphics.prototype.cachedGraphicsData=[],r.Graphics.prototype._renderCanvas=function(e){!0!==this.isMask&&(this.finishPoly(),e.plugins.graphics.render(this))},e.CanvasGraphicsRenderer=o,Object.defineProperty(e,"__esModule",{value:!0}),e}({},PIXI,PIXI,PIXI,PIXI);Object.assign(this.PIXI,_pixi_canvas_graphics);
//# sourceMappingURL=canvas-graphics.min.js.map
